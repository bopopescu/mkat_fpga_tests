# NB: section names are case sensitive, but option names are NOT!

# Configuration for automated testing

[instrument_params]
# Client katcp should connect to
katcp_client = 10.103.254.6
# Which subarray to create
subarray = array0
# Are the sensors labeled input0 .. inputx or by input label:
sensor_named_by_label = True
# Number of clean_dump retries to get correct data
data_retries = 6

# parameters to initialise instrument with
#    1011 (Default) :1=enable, 0=disable
#    [program, configure, require synchronisation epoch, monitor vector accumulators]

instrument_param = 1,1,1,0
katcp_port = 7147
# corr rx port to listen to
corr_rx_port = 7148
# Utility for handling KATCP protocol flags.
katcp_protocol =  5,0,M

# corr2_servlet listening ip and port id
#corr2_servlet_ip = 10.103.254.6
#corr2_servlet_port = 7601

# Nominal L-Band sample frequency
l_band_sample_freq = 1.712e9
# Nominal UHF-Band sample frequency
uhf_band_sample_freq = 1.088e9
# Current sample frequency
sample_freq = 1.712e9
# Current output product
output_product = baseline-correlation-products

# Start and stop channels to capture
start_channels = 0
#stop_channels = 4095
#stop_channels = 32767
#stop_channels = 16383
#stop_channels = 2047
stop_channels = 1023

# CAM max load time for delays
cam_max_load_time = 1

# CAM delay load lead time (seconds)
#delay_load_lead_time = 3
delay_load_lead_time = 4

# Number of integrations to apply delays in the future
# 2 second dump time:
#num_int_delay_load = 4
# 0.5 sec dump time: (teak?)
num_int_delay_load = 6

# Accumulation time for test
# 64 ant
#accumulation_time = 2.0
#accumulation_time = 1.0
# 4 ant
accumulation_time = 0.5

# Number of channels to step over during Channelisation Wideband Coarse SFDR test
sfdr_ch_to_test = 20

# Network latency to use when applying delays
#network_latency = 0.03
network_latency = 0.01

# Default dsim and instrument gains for noise profile
# "1k"
noise1k_awgn_scale_0_5 = 0.05
noise1k_cw_scale_0_5 = 0.0
noise1k_gain = 2500+0j
noise1k_fft_shift = 2047
# "4k"
noise4k_awgn_scale_0_5 = 0.05
noise4k_cw_scale_0_5 = 0.0
noise4k_gain = 200+0j
noise4k_fft_shift = 3822
# "32k"
noise32k_awgn_scale_0_5 = 0.01
noise32k_cw_scale_0_5 = 0.0
noise32k_gain = 1000+0j
noise32k_fft_shift = 63454
# "32knb"
noise32knb_awgn_scale_0_5 = 0.05
noise32knb_awgn_scale_0_1 = 0.05
noise32knb_cw_scale_0_5 = 0.0
noise32knb_cw_scale_0_1 = 0.0
noise32knb_gain = 6000+0j
noise32knb_fft_shift = 43604

# Default dsim and instrument gains for cw profile (Last numbers indicates integration time)
# "1k"
cw1k_cw_scale_0_5 = 0.8
cw1k_cw_scale_1_0 = 0.425
cw1k_awgn_scale_0_5 = 0.08
cw1k_awgn_scale_1_0 = 0.059
cw1k_gain = 24+0j
cw1k_fft_shift = 2047
# "4k"
cw4k_cw_scale_0_5 = 0.8
cw4k_cw_scale_1_0 = 0.6
cw4k_awgn_scale_0_5 = 0.09
cw4k_awgn_scale_1_0 = 0.1
cw4k_gain = 28+0j
cw4k_fft_shift = 16383
# 32K
cw32k_cw_scale_0_5 = 0.16
cw32k_cw_scale_1_0 = 0.6
cw32k_cw_scale_2_0 = 0.09
cw32k_awgn_scale_0_5 = 0.05
cw32k_awgn_scale_1_0 = 0.2
cw32k_awgn_scale_2_0 = 0.042
cw32k_gain = 20+0j
cw32k_fft_shift = 65535
# 32Knb
cw32knb_cw_scale_0_5 = 0.9
cw32knb_cw_scale_1_0 = 0.9
cw32knb_awgn_scale_0_5 = 0.05
cw32knb_awgn_scale_1_0 = 0.05
cw32knb_gain = 1000+0j
cw32knb_fft_shift = 43604

[pdu_hosts]
pdus =  b7-pdu1, b5-pdu1, b4-pdu1, b3-pdu1, b2-pdu1, b1-pdu1, b1-pdu2
# pdus =  b7-pdu1, b5-pdu1, b4-pdu1, b3-pdu1, b2-pdu1, b6-pdu1, b6-pdu2, b1-pdu1, b1-pdu2
# pdus =  b13-pdu1, b12-pdu1, b11-pdu1, b6-pdu1, b6-pdu2, b1-pdu1, b1-pdu2
# unlocking mechanism: 1234567890123456
pdu_host_domain = pdu.mkat.karoo.kat.ac.za
username = gUhd9TxpnQppnZVAf7cv9hg8fFyvuzfwBOUcnfoPdEo=
passwd = gUhd9TxpnQppnZVAf7cv9i13lNghiYeILF0mkoJrujE=
telnet_port = 23

[beamformer]
ingest_node_cmc2 = 10.103.254.3
ingest_node_cmc3 = 10.103.254.6
ingest_node_port = 2050
# Fraction of band to capture, depends on speed of capturing machine
1k_band_to_capture = 0.15
4k_band_to_capture = 0.15
32k_band_to_capture = 0.3
substreams_to_cap = 2
start_substream_idx = 0
center_bin_offset = 0.01

[delay_req]
# Resolution of delay <= 2.5 ps
delay_resolution = 2.5e-12
# Resolution of rate of change of delay <= 2.5 ps/s
delay_rate_resolution = 2.5e-12
# Resolution of phase <= 0.01 radians
phase_resolution = 0.01
# Resolution of rate of change of phase 0.044 rad/s
phase_rate_resolution = 0.044 
